![Logo](Git.jpg)

# Работа с Git :)

## 1. Проверка наличия установленного Git

В терминале выполнить команду

```
git version
```

Если Git установлен, появится сообщение о установленной версии программы. Иначе будет сообщение об ошибке.

## 2. Установка Git

Загружаем последнюю версию с сайта по [ссылке](https://git-scm.com/downloads).
Устанавливаем с настройками по умолчанию.

## 3. Настройка Git

При первом использовании Git необходимо представиться.
Для этого в терминале нужно ввести две команды:

```
git config --global user.name "<ваше_имя>"
git config --global user.email "<адрес_почты@email.com>"
```

## 4. Инициализация репозитория

Git это система управления версиями. Это значит, что у каждого участника проекта есть своя копия репозитория, которая находиться в папке “.git”, которая расположена в корне проекта. Именно в этой папке хранятся все коммиты и другие объекты Git. Когда мы работаем с Git, он в свою очередь работает с этой папкой.

Новый репозиторий создается командой

```
git init
```

Если мы хотим присоединиться к разработке уже имеющегося проекта, то нужно будет скопировать этот репозиторий в свою локальную папку с удаленного репозитория. Делается это так:

```
git clone <url удаленного репозитория>
```

После чего в текущей папке появляется директория .git в которой и будет содержаться копия удаленного репозитория.

## 5. Процесс работы с Git

После добавления файла в папку проекта нужно зафиксировать изменения. Добавляем файл с помощью команды

```
git add
```

а затем фиксируем изменения с помощью команды

```
commit -m "Комментарий к коммиту"
```  

Когда коммитов накопится достаточно много, чтобы ими можно было поделиться, мы выполняем команду

```
git push
```

После чего наши коммиты уходят в удаленный репозиторий.

Просмотреть коммиты можно при помощи команды

```
git log
```

Что бы закончить просмотр нужно нажать на клавишу q.

Формат ответа этой команды не очень удобен. Вот такая команда выведет ответ в более читаемом виде

```
git log --oneline
```

Посмотреть, что находиться в рабочей директории можно командой

```
git status
```

Рабочую директорию можно переключить на предыдущее состояние выполнив команду

```
git checkout <hash коммита> 
```

Только перед тем как это делать, выполните `git status` и убедитесь, что у вас нет никаких локальных и не зафиксированных изменений. Иначе Git не поймет, как ему переключаться. `git status` подскажет вам что можно сделать с локальными изменениями что бы можно было переключиться. Этого правила следует придерживаться и при всяких других переключениях рабочей области.

### Необходимый минимум команд

* *git init* - создание репозитория
* *git config --global --list* - вывод файла конфигурации
* *git status* - информация о папке
* *git status -h* - справочная информация
* *git add* - добавление изменений в файл
* *git add .* - добавление изменений во все файлы
* *git commit -m* - сохранение изменений с поясняющим сообщением
* *git commit -am* - комбинированная команда, не требует `git add`. Добавляет `все` измнения во `всех` файлах
* *git --amend -m* - исправление комментария в `commit`
* *git revert < id >* - отмена коммита
* *git reset < id > --hard* - удаление коммита
* *git log* - вывод журнала
* *git log --online* - короткий вывод журнала
* *git checkout*  - переход к версии файла
* *git checkout master* - возврат на актуально е состояние файла
* *git switch-* - то же что и `git checkout master`
* *git diff* - разнница между текущим и сохраненным состоянием файла
* *git rm* - принудительное удаление файла

## 6. Ветки Git

### Создание веток и переключение между ними

Ветки нужны для выполнения отдельных задач.
Можно одному отдать задачу по форматированию текста, а другому задачу по работе со списками. После выполнения задач можно результат добавить в ветку `master`. Можете сами использовать отдельные ветки, как черновики. Когда будете считать, что блок достаточен для добавления в ветку `master`, можете перевести из черновика (отдельной ветки) в чистовик (ветка `master`).
Просто сделать ветку, не переключаясь на нее можно командой

```
git branch <имя ветки>
```

переключиться на ветку

```
git checkout <имя ветки>
```

### Слияние ветвей и удаление ветвей

Слияние ветвей происходит посредством команды

```
git merge
```

Коммит слияния веток будет отображен в обеих ветках.

После слияния вливаемую ветку можно удалить, если она не нужна.

Для этого применяется команда

```
git branch -d <имя ветки>
```

Если требуется принудительное удаление, то применяется команда

```
git branch -D <имя ветки>
```

Иногда при слиянии веток происходят конфликты.
Простые разрешаются автоматически, а сложные необходимо устранять вручную. Далее необходимо сделать коммит слияния после разрешения конфликта.

Например

![Example](Example_conflict.png)

### Ингнорирование изменений

В специальный файл

```
.gitignore
```

добавляются файлы, которые не следует хранить в репозитории. Например, файлы, не содержащие редактируемый программный код, такие как изображения и прочие.

## 7. Работа с удаленным репозитороием

Для начала нам нужно создать учетную запись на сайте [GitHub](https://github.com/).
После этого нам нужно создать локальный репозиторий в нашем комьютере.

Собственно, коммит, созданный нами, хранится в репозитории, привязанном к конкретной папке на нашем компьютере, т.е. является локальным. Это нужно, если мы работаем над проектом самостоятельно. Однако в большинстве случаев возникает необходимость обеспечить доступ к результатам работы или доставить код на сервер, где он будет выполняться.

1. Как подключиться к удаленному репозиторию.

Для загрузки данных в удаленный репозиторий сначала нужно к нему подключиться.
Для того, чтобы связать созданный нами локальный репозитарий с удаленным, выполним такую команду

```
git remote add origin <адрес>
```

GitHub при созданиинового репозитория подскажет как это сделать.

2. Как отправить изменения в удаленный репозиторий.

Теперь, когда у нас в локальном репозитории создан коммит и мы подключились к удаленному, можем отправить его на сервер. Мы это будем делать каждый раз, когда хотим обновить данные в удаленном репозитории.

Отправка коммита осуществляется с помощью команды

```
 git push
 ```

  которая имеет два параметра - имя удаленного репозитория (`origin`) и ветку, в которую необходимо внести изменения (`master` — это ветка по умолчанию для всех репозиториев).

3. Как клонировать удаленный репозиторий.

Если у других пользователей возникла необходимость клонировать удаленный репозиторий, они могут получить полностью работоспособную копию при помощи команды
```
git clone
```

GitHub автоматически создаст новый локальный репозиторий в виде удаленного на собственном сервере.

4. Как запросить изменения с удаленного репозитория?

В случае, если другим пользователям нет необходимости делать клон удаленного репозитория, а нужно просто получить информацию об изменениях, это можно сделать с помощью команды
```
git pull
```

Она скачивает новые изменения.
### Делаем pull request

1. Делаем `fork` репозитория.
2. Делаем клон `своей` версии репозитория.
3. Создаем ветку и в `нее` вносим свои изменения.
4. Фиксируем изменения (делаем коммиты).
5. Отправляем изменения в свой `GitHub`.
6. На сайте GitHub нажимаем кнопку `pull request`.

## Дополнительные команды

git blame filename - какие изменения какими пользователями и в рамках каких коммитов вносились в файл.
git restore filename - сделанные в этом файле изменения исчезнут. Если же файл уже был добавлен в индекс, то его можно вернуть из индекса аналогичной командой, но с параметром “--staged”.
git rm --cached file_name - команда для того, чтобы Git перестал отслеживать изменения в этом файле.

